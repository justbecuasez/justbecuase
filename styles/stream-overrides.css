/*
 * GetStream CSS Overrides for JustBecause Network
 * Maps Stream's CSS variables to the app's teal/coral theme
 */

/* ============================================
   Stream Chat Theme Integration
   ============================================ */

.str-chat {
  /* Map Stream colors to JustBecause theme */
  --str-chat__primary-color: var(--primary);
  --str-chat__active-primary-color: var(--primary);
  --str-chat__surface-color: var(--card);
  --str-chat__secondary-surface-color: var(--muted);
  --str-chat__primary-surface-color: var(--accent);
  --str-chat__primary-surface-color-low-emphasis: var(--accent);
  --str-chat__text-color: var(--foreground);
  --str-chat__text-low-emphasis-color: var(--muted-foreground);
  --str-chat__disabled-color: var(--muted-foreground);
  --str-chat__border-color: var(--border);
  --str-chat__border-radius-circle: var(--radius);
  --str-chat__avatar-background-color: var(--primary);
  --str-chat__message-bubble-color: var(--foreground);

  /* Font family */
  font-family: var(--font-sans), system-ui, sans-serif;
}

/* Channel list styling */
.str-chat__channel-list {
  background: var(--card);
  border-color: var(--border);
}

.str-chat__channel-preview-messenger--active {
  background: var(--accent) !important;
  border-radius: var(--radius);
}

.str-chat__channel-preview-messenger:hover {
  background: var(--muted);
  border-radius: var(--radius);
}

/* Channel header */
.str-chat__channel-header {
  background: var(--card);
  border-color: var(--border);
  padding: 12px 16px;
}

/* Message list */
.str-chat__list {
  background: var(--background);
}

/* Message bubbles */
.str-chat__message-simple {
  font-family: inherit;
}

.str-chat__message-bubble {
  border-radius: var(--radius) !important;
}

/* Own messages - use primary color */
.str-chat__message--me .str-chat__message-bubble {
  background: var(--primary) !important;
  color: var(--primary-foreground) !important;
}

.str-chat__message--me .str-chat__message-bubble p {
  color: var(--primary-foreground) !important;
}

/* Other messages */
.str-chat__message--other .str-chat__message-bubble {
  background: var(--muted) !important;
  color: var(--foreground) !important;
}

/* Message input */
.str-chat__message-input {
  background: var(--card);
  border-color: var(--border);
}

.str-chat__input-flat {
  border-color: var(--border);
}

.str-chat__input-flat:focus-within {
  border-color: var(--ring);
  box-shadow: 0 0 0 2px color-mix(in oklch, var(--ring), transparent 80%);
}

/* Send button */
.str-chat__send-button {
  color: var(--primary);
}

.str-chat__send-button:hover {
  color: var(--primary);
  opacity: 0.8;
}

/* Emoji / Attachment buttons */
.str-chat__emoji-picker-button,
.str-chat__file-input-container button {
  color: var(--muted-foreground);
}

.str-chat__emoji-picker-button:hover,
.str-chat__file-input-container button:hover {
  color: var(--foreground);
}

/* Thread */
.str-chat__thread {
  background: var(--card);
  border-color: var(--border);
}

/* Date separator */
.str-chat__date-separator-date {
  color: var(--muted-foreground);
  font-size: 12px;
}

/* Typing indicator */
.str-chat__typing-indicator {
  color: var(--muted-foreground);
}

/* Search input */
.str-chat__channel-search {
  background: var(--card);
  border-color: var(--border);
}

.str-chat__channel-search-input {
  background: var(--background);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--foreground);
}

.str-chat__channel-search-input:focus {
  border-color: var(--ring);
  box-shadow: 0 0 0 2px color-mix(in oklch, var(--ring), transparent 80%);
}

/* Unread badge */
.str-chat__channel-preview-unread-badge {
  background: var(--destructive);
  color: var(--destructive-foreground);
}

/* Reaction selector */
.str-chat__reaction-selector {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
}

/* Attachments */
.str-chat__message-attachment--image img {
  border-radius: var(--radius);
}

/* Scrollbar */
.str-chat__list::-webkit-scrollbar,
.str-chat__channel-list::-webkit-scrollbar {
  width: 6px;
}

.str-chat__list::-webkit-scrollbar-track,
.str-chat__channel-list::-webkit-scrollbar-track {
  background: transparent;
}

.str-chat__list::-webkit-scrollbar-thumb,
.str-chat__channel-list::-webkit-scrollbar-thumb {
  background: var(--muted-foreground);
  border-radius: 3px;
  opacity: 0.3;
}

/* ============================================
   Custom container styles
   ============================================ */

.stream-chat-container {
  position: relative;
}

/* Custom header with call buttons */
.stream-custom-header {
  display: flex;
  align-items: center;
  position: relative;
}

.stream-custom-header .str-chat__channel-header {
  flex: 1;
  border-bottom: none;
}

.stream-header-actions {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
}

/* ============================================
   Video Call Theme Integration
   ============================================ */

/* Stream Video theme overrides */
.str-video {
  --str-video__primary-color: var(--primary);
  --str-video__text-color: var(--foreground);
  --str-video__background-color: var(--background);
}

/* Video call controls bar */
.str-video__call-controls {
  background: var(--card);
  border-radius: var(--radius);
}

.str-video__call-controls__button {
  border-radius: var(--radius);
}

/* Participant view */
.str-video__participant-view {
  border-radius: var(--radius);
}

/* ============================================
   Responsive adjustments
   ============================================ */

@media (max-width: 1024px) {
  .stream-chat-container .str-chat__channel-list {
    width: 100% !important;
  }

  .stream-custom-header .str-chat__header-hamburger {
    display: flex !important;
  }
}

@media (min-width: 1024px) {
  .stream-custom-header .str-chat__header-hamburger {
    display: none !important;
  }
}
